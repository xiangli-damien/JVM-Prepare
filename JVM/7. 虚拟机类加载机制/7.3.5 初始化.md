
### 概述
- 初始化阶段是类加载过程的最后一个步骤，这时候才真正开始执行类中编写的Java代码。
- 初始化阶段主要负责*对类变量和其他资源进行初始化*。
- **这个阶段执行的是类构造器`<clinit>()`方法的过程**。

### `<clinit>()`方法

- `<clinit>()`方法是由编译器自动收集类中的所有类变量的赋值动作和静态语句块中的语句合并产生的。
- 编译器收集的顺序是*由语句在源文件中出现的顺序决定的*。
- `<clinit>()`方法不需要显式地调用父类构造器，Java虚拟机会保证在子类的`<clinit>()`方法执行前，父类的`<clinit>()`方法已经执行完毕。
- `<clinit>()`*方法对于类或接口并不是必需的*，如果没有静态语句块也没有变量赋值操作，则编译器可以不生成`<clinit>()`方法。

### 初始化阶段的特点

- 执行`<clinit>()`时，==静态语句块中只能访问到定义在它之前的变量==。
- 父类的`<clinit>()`方法先执行，因此*父类中定义的静态语句块优先于子类的变量赋值操作。*
- 接口中不能使用静态语句块，但静态变量的赋值操作仍然会生成`<clinit>()`方法。
- Java虚拟机必须保证一个类的`<clinit>()`方法在多线程环境中被正确地加锁同步。
- 如果`<clinit>()`方法中有耗时很长的操作，可能造成多个线程阻塞。

### 多线程中的初始化

- *如果多个线程同时初始化一个类，则只有一个线程会去执行这个类的`<clinit>()`方法，其他线程需要阻塞等待。*

- 在执行`<clinit>()`方法的线程退出`<clinit>()`方法后，被阻塞的线程唤醒后不会再次进入`<clinit>()`方法，因为*同一个类加载器下，一个类型只会初始化一次*。

