
### 概述

准备阶段负责*为类的静态变量分配内存*，*并将其初始化为默认值*。

## 准备阶段的主要活动

1. **内存分配**
   - 类变量/静态变量（即被 `static` 修饰的变量）在方法区中分配内存。
   - 只为类变量分配内存，而不包括实例变量。
   
1. **变量默认初始化**
   - 类变量初始化为数据类型的零值（如 `int` 的零值是 `0`，对象引用的零值是 `null`）。
   - 特别注意，即使变量定义时指定了初始值，准备阶段也不会赋值为定义时的值。

2. **特殊情况：ConstantValue属性**
   - 如果类字段的字段属性表存在 `ConstantValue` 属性，则在准备阶段变量值会初始化为 `ConstantValue` 属性指定的值。
   - 例如，`public static final int value = 123;` 中的 `value` 会被初始化为 `123`，而不是零值。

## 基本数据类型的零值

| 类型     | 零值    |
| -------- | ------- |
| `byte`   | `(byte)0` |
| `short`  | `(short)0` |
| `int`    | `0`     |
| `long`   | `0L`    |
| `float`  | `0.0f`  |
| `double` | `0.0d`  |
| `char`   | `\u0000` |
| `boolean`| `false` |
| `Object` | `null`  |



> 类变量的内存分配在方法区进行，但自JDK 8起，类变量随Class对象在Java堆中
> 
> 默认初始化不考虑类变量具体声明的初始值，除非设置了 `ConstantValue` 属性。
> 
> `ConstantValue` 属性仅适用于 `final` 修饰的静态变量。
